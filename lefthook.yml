# TODO: skip impure attrs - https://github.com/divnix/std/blob/12b3d2bcf7313e9ad790d575992fd69be3767a9f/cells/std/nixago/lefthook.nix#L12-L28

commit-msg:
  scripts:
    "commitlint.sh":
      runner: nix develop --command

pre-commit:
  parallel: true
  commands:
    format-prettier:
      glob: "*.{css,html,json,md,mdx,scss}"
      run: prettier --write {staged_files}
    lint-js:
      glob: "*.{js,ts,jsx,tsx}"
      # FIXME: nextjs linter can't handle multiple files unless a separate flag
      # is specified for each file...... so now we lint everything.....
      run: yarn lint

pre-push:
  commands:
    # FIXME: all builds fail right now
    # build-nextjs-app:
      # run: yarn build
